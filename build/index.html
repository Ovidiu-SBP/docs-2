
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Platform Of Trust Documentation</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;java&quot;,&quot;python&quot;,&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="java">java</a>
              <a href="#" data-language-name="python">python</a>
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#platform-of-trust-apis" class="toc-h1 toc-link" data-title="Platform of Trust APIs">Platform of Trust APIs</a>
          </li>
          <li>
            <a href="#getting-started" class="toc-h1 toc-link" data-title="Getting started">Getting started</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#auth-practices" class="toc-h2 toc-link" data-title="Auth practices">Auth practices</a>
                  </li>
                  <li>
                    <a href="#standards-used" class="toc-h2 toc-link" data-title="Standards used">Standards used</a>
                  </li>
                  <li>
                    <a href="#code-examples" class="toc-h2 toc-link" data-title="Code Examples">Code Examples</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#translator-rest-api" class="toc-h1 toc-link" data-title="Translator REST API">Translator REST API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#health" class="toc-h2 toc-link" data-title="/HEALTH">/HEALTH</a>
                  </li>
                  <li>
                    <a href="#fetch" class="toc-h2 toc-link" data-title="/FETCH">/FETCH</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#login-api" class="toc-h1 toc-link" data-title="Login API">Login API</a>
          </li>
          <li>
            <a href="#context-api" class="toc-h1 toc-link" data-title="Context API">Context API</a>
          </li>
          <li>
            <a href="#data-broker-rest-api" class="toc-h1 toc-link" data-title="Data Broker REST API">Data Broker REST API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#health-2" class="toc-h2 toc-link" data-title="/HEALTH">/HEALTH</a>
                  </li>
                  <li>
                    <a href="#fetch-data-product" class="toc-h2 toc-link" data-title="/FETCH-DATA-PRODUCT">/FETCH-DATA-PRODUCT</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#product-api" class="toc-h1 toc-link" data-title="Product API">Product API</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#authentication-code-example" class="toc-h2 toc-link" data-title="Authentication code example">Authentication code example</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#ontologies" class="toc-h1 toc-link" data-title="Ontologies">Ontologies</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#heading-2" class="toc-h2 toc-link" data-title="Heading 2">Heading 2</a>
                  </li>
                  <li>
                    <a href="#heading-3" class="toc-h2 toc-link" data-title="Heading 3">Heading 3</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
          <li>
            <a href="#feedback" class="toc-h1 toc-link" data-title="Feedback">Feedback</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='#'>Sign Up for a Developer Key</a></li>
            <li><a href='https://github.com/lavkumarv'>Documentation Powered by lav</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='platform-of-trust-apis'>Platform of Trust APIs</h1>
<p>This could be rather static introduction to Platform of Trust APIs and written in separate file. Then just preprocess the files and merge all, or do it 
manually. Nope! Includes go all to bottom. </p>
<h1 id='getting-started'>Getting started</h1><h2 id='auth-practices'>Auth practices</h2>
<p>We use OAuth xxx flow. Every API call is required to have ..... Read more from <a href="#authentication">Authentication section</a></p>
<h2 id='standards-used'>Standards used</h2>
<ul>
<li>All time and date fields and values follow ISO-8601 standard. Example <code>2008-09-15T15:53:00+05:00</code></li>
</ul>
<h2 id='code-examples'>Code Examples</h2>
<aside class="warning">
All the documentation code examples use our sandbox environment. When you are done with testing, you should switch to production environment. Easiest way is to store API root url in variable and when needed, change it there. Thus the code examples contain API-root variable as an exmaple. 
</aside>
<h1 id='translator-rest-api'>Translator REST API</h1>
<p><strong>Version:</strong> v1 </p>

<p>API Description should come from the code as well...</p>
<h2 id='health'>/HEALTH</h2>
<p>Jotain kuvausta.</p>
<pre class="highlight java tab-java"><code><span class="n">require</span> <span class="err">'</span><span class="n">kittn</span><span class="err">'</span>

<span class="n">api</span> <span class="o">=</span> <span class="nl">Kittn:</span><span class="o">:</span><span class="n">APIClient</span><span class="o">.</span><span class="na">authorize</span><span class="o">!(</span><span class="err">'</span><span class="n">meowmeowmeow</span><span class="err">'</span><span class="o">)</span>
<span class="n">api</span><span class="o">.</span><span class="na">kittens</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">kittn</span>

<span class="n">api</span> <span class="o">=</span> <span class="n">kittn</span><span class="o">.</span><span class="n">authorize</span><span class="p">(</span><span class="s">'meowmeowmeow'</span><span class="p">)</span>
<span class="n">api</span><span class="o">.</span><span class="n">kittens</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s2">"http://sandbox.oftrust.net/api/translator/health"</span>
  -X GET
  -H <span class="s2">"Authorization: meowmeowmeow"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">kittn</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'kittn'</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">api</span> <span class="o">=</span> <span class="nx">kittn</span><span class="p">.</span><span class="nx">authorize</span><span class="p">(</span><span class="s1">'meowmeowmeow'</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">max</span> <span class="o">=</span> <span class="nx">api</span><span class="p">.</span><span class="nx">kittens</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
</code></pre><h3 id='get'><strong><em>GET</em></strong></h3>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="s2">"deleted"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">":("</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Description:</strong> Health check endpoint</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>***GET*** /health</code> </p>

<p><strong>Responses</strong></p>

<table><thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td></td>
</tr>
</tbody></table>
<h2 id='fetch'>/FETCH</h2><h3 id='post'><strong><em>POST</em></strong></h3><pre class="highlight shell tab-shell"><code><span class="c"># Notice the sandbox URL, change to production when needed. </span>
curl <span class="s2">"http://sandbox.oftrust.net/api/translator/fetch"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"X-PoT-Signature: xxx"</span> <span class="se">\</span>
  -H <span class="s2">"X-PoT-Token: meowmeowmeow"</span> <span class="se">\</span>
  -H <span class="s2">"X-PoT-App: xxx"</span> 
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="s2">"deleted"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">":("</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Description:</strong> Get the data for the translator</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><strong>POST</strong> /fetch </p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Located in</th>
<th>Description</th>
<th>Required</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>X-PoT-Signature</td>
<td>header</td>
<td>A HMAC-SHA256 generated signature of the payload. E.g. HMAC-SHA256(sharedSecret, body)</td>
<td>Yes</td>
<td>string</td>
</tr>
<tr>
<td>X-PoT-Token</td>
<td>header</td>
<td>The user&#39;s OAuth token</td>
<td>No</td>
<td>string</td>
</tr>
<tr>
<td>X-PoT-App</td>
<td>header</td>
<td>App name (App ID)</td>
<td>No</td>
<td>string</td>
</tr>
<tr>
<td>body</td>
<td>body</td>
<td></td>
<td>Yes</td>
<td></td>
</tr>
</tbody></table>

<p><strong>Responses</strong></p>

<table><thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td></td>
</tr>
<tr>
<td>422</td>
<td></td>
</tr>
</tbody></table>
<h1 id='login-api'>Login API</h1><h1 id='context-api'>Context API</h1><h1 id='data-broker-rest-api'>Data Broker REST API</h1>
<p><strong>Version:</strong> v0.1 </p>
<h2 id='health-2'>/HEALTH</h2><h3 id='get-2'><strong><em>GET</em></strong></h3>
<p><strong>Description:</strong> Health check endpoint</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><strong>GET</strong> /health </p>

<p><strong>Responses</strong></p>

<table><thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td></td>
</tr>
</tbody></table>
<h2 id='fetch-data-product'>/FETCH-DATA-PRODUCT</h2><h3 id='post-2'><strong><em>POST</em></strong></h3>
<p><strong>Description:</strong> Fetch data product</p>
<h3 id='http-request-4'>HTTP Request</h3>
<p><strong><em>POST</em></strong> /fetch-data-product </p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Located in</th>
<th>Description</th>
<th>Required</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td></td>
<td>Yes</td>
<td></td>
</tr>
</tbody></table>

<p><strong>Responses</strong></p>

<table><thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td></td>
</tr>
<tr>
<td>422</td>
<td></td>
</tr>
</tbody></table>
<h1 id='product-api'>Product API</h1>
<!-- Converted with the swagger-to-slate https://github.com/lavkumarv/swagger-to-slate -->
<h1 id='authentication'>Authentication</h1>
<p>It&#39;s typically a good idea to explain the whole authentication process, because even to this day not everyone is familiar with how they work. In a nutshell <a href="https://www.oauth.com/oauth2-servers/single-page-apps/#authorization">this is what we use</a></p>

<p>The basic flow of how it goes is:</p>

<ol>
<li><p>user gets redirected from YOUR frontend to YOUR backend&#39;s <code>/login</code> endpoint or similar</p></li>
<li><p>the <code>/login</code> endpoint generates a <code>state</code> parameter for it&#39;s own security by e.g. signing the current timestamp with a secret from it&#39;s config</p></li>
<li><p>the <code>/login</code> endpoint redirects the user to the login portal with parameters that define the application the user is coming from (client_id, redirect_uri) as well as the state and that we&#39;re going to do a code exchange</p></li>
<li><p>login portal takes care of identifying the user</p></li>
<li><p>login portal sends user back to YOUR backend&#39;s &quot;return url&quot;, e.g. <code>/login/complete</code> with the new code and the state you provided etc.</p></li>
<li><p>you validate the state seems valid, isn&#39;t too old, etc.</p></li>
<li><p>you send this code with your client secret to the authorization backend in a server to server -request and get back the actual login token</p></li>
<li><p>you set the token in a cookie (preferably with <code>httpOnly; secure; SameSite=strict</code>)</p></li>
</ol>
<h2 id='authentication-code-example'>Authentication code example</h2>
<p>The above is rather theoretical description of it. Lets have a look at one example. </p>
<h1 id='ontologies'>Ontologies</h1>
<p>Text content</p>
<h2 id='heading-2'>Heading 2</h2>
<p>Content </p>
<h2 id='heading-3'>Heading 3</h2><h1 id='errors'>Errors</h1>
<p>The Platform of Trust APIs all use the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request is invalid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Your API key is wrong.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- The item requested is hidden for administrators only.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The specified item could not be found.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed -- You tried to access item with an invalid method.</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable -- You requested a format that isn&#39;t json.</td>
</tr>
<tr>
<td>410</td>
<td>Gone -- The requested item has been removed from our servers.</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests -- You&#39;re requesting too many times! Slow down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>
<h1 id='feedback'>Feedback</h1>
<p>If you found a bug or missing information in the documentation, contact us at dev@oftrust.net or create an issue in Github. </p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="java">java</a>
                <a href="#" data-language-name="python">python</a>
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
</html>
